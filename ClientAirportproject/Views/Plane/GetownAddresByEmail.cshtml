
<style>
   /* body
    {
        background-size:cover;
        background-image: url('../../images/image (1).jpg');
    }*/
    .ads
    {
        display:none;
    }
    .dis
    {
        display:none;
    }
    .dis1{
        display:none;
    }
    #b2{
        background-color:blue;
        width :3cm;
        color:white;
    }


   /* red Alert*/
    .red {
        padding: 15px;
        background-color: red;
        color: white;
        width: 10cm;
        position: absolute;
        border-radius: 8px;
        left: 63%;
        top: 20%;
    }

    .alert {
        padding: 15px;
        background-color: #f44336;
        color: white;
        width: 7cm;
        position: absolute;
        left:63%;
        top: 20%;


    }

    /*blue color*/
    .alert1 {
        padding: 15px;
        background-color: deepskyblue;
        color: white;
        width: 7cm;
        position: absolute;
        border-radius:8px;
        left: 63%;
        top: 20%;

    }
    #b1 {
        background-color: #0000ff;
        border-radius:4px;
        color:white;
    }
    #b2 {
        background-color: #0000ff;
     color:white;
        border-radius: 4px;
    }



        /* Styles for the first table */
    #firstTable {
        display: inline-block;
        position: absolute;
        left: 40%;
        background-color: white;
        top: 50%;
        box-shadow: 0 4px 8px rgb(0, 0, 0);
        
        border-radius:8px;
    }

    /* Styles for the second table */
    #secondTable {
        display: inline-block;
        position: absolute;
        background-color: white;
        left: 40%;
        top: 20%;
        border-radius: 7px;
        box-shadow: 0 4px 8px rgb(0, 0, 0);
        
    }


</style>





    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
   



    <h3 style="font-family: 'Imprint MT Shadow';top:10px">Get Owner Details</h3>
    <div class="alert" id="myAlert" style="display:none;">

        <strong>OOPS!</strong> <div id="eneterenail"></div>
    </div>
    <div class="alert1" id="myAlert1" style="display:none;">

        <strong>Oh!</strong> <div id="status"></div>
    </div>

    <div class="table-container">
        <div id="firstTable">
            <table class="table">

                <tr>
                    <th>Owner Email</th>
                    <td><input type="text" id="emailInput" placeholder="EX: john12@gmail.com"></td>
                </tr>
                <tr>
                    <td>
                        <button id="fetchDataBtn" class="btn btn-success">Validate</button>
                    </td>
                    <td><button onclick="fetch()" id="b2" class="dis">Proceed</button></td>

                </tr>

            </table>
        </div>
        <div id="secondTable" >

            <table class="table">


                <tr class="ads">
                    <td class="ads">
                        Owner name
                    </td>
                    <td>
                        <input type="text" id="owname" class="ads" />
                    </td>


                </tr>
                <tr class="ads">
                    <td class="ads">
                        Owner Email
                    </td>
                    <td>
                        <input type="text" id="email1" class="ads" />
                    </td>


                </tr>
                <tr class="ads">
                    <td>
                        Hno
                    </td>
                    <td>
                        <input type="text" id="hno" class="ads" />
                    </td>


                </tr>
                <tr class="ads">
                    <td>
                        addres line one
                    </td>
                    <td>
                        <input type="text" id="adl" class="ads" />
                    </td>


                </tr>
                <tr class="ads">
                    <td>
                        City
                    </td>
                    <td>
                        <input type="text" id="city" class="ads" />
                    </td>


                </tr>
                <tr class="ads">
                    <td>
                        state
                    </td>
                    <td>
                        <input type="text" id="state" class="ads" />
                    </td>


                </tr>
                <tr class="ads"><td class="ads"><input type="text" hidden name="email1" id="email" /></td></tr>
                <tr class="ads">
                    <td>
                        country
                    </td>
                    <td>
                        <input type="text" id="country" class="ads" />
                    </td>


                </tr>
                <tr class="ads">
                    <td>
                        pincode
                    </td>
                    <td>
                        <input type="text" id="pincode" class="ads" />
                    </td>


                </tr>
                <tr class="ads"><td class="ads"> <input type="checkbox" id="myCheckbox" /> <td class="ads">Enable the check box if the above details correct about owner</td></tr>
                <tr class="ads"><td ><button onclick="addplane()" id="b1" class="dis1">Proceed</button></td></tr>


            </table>
        </div>


    </div>














    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    <script>


        function fetch() {
            window.location.href = "AddPlaneOwnerAddress"

        }
        function addplane() {
            var checkbox = document.getElementById("myCheckbox");

            if (checkbox.checked) {
                var s = document.getElementById("email").value;
                window.location.href = "Addonlyplane?email=" + s;
            }
            else {
                 var redElement = document.getElementById("red1");
                      redElement.innerText = "Enable the check box!";

                      var redAlertElement = document.getElementById("red");
                      redAlertElement.style.display = 'block';

                  
                      setTimeout(function () {
                          redAlertElement.style.display = 'none';
                      }, 3000);
            }




        }


        $(document).ready(function () {
            $("#fetchDataBtn").click(function () {
                var email = $("#emailInput").val();
                if (email.length === 0) {




                    document.getElementById("eneterenail").innerText = "Email not Entered!";

                    var alertElement = document.getElementById("myAlert");
                    alertElement.style.display = 'block';

                    // Set a timer to hide the alert after 3 seconds
                    setTimeout(function () {
                        alertElement.style.display = 'none';
                    }, 3000);
                }


                else {

                    // Make AJAX request to the first API to get addresid and name
                    $.ajax({
                        url: 'https://ganeshgondyalaserver.azurewebsites.net/api/Planeowner',
                        method: 'GET',
                        /* data: { Email: email },*/
                        success: function (pw) {
                            data = [];
                            for (var i = 0; i < pw.length; i++) {
                                if (pw[i].Email == email) {
                                    data.push(pw[i]);
                                }
                            }

                            if (data.length > 0) {
                                var d = $(".ads")
                                d.show();
                                var r1 = $(".dis1")

                                r1.show();


                                var addresid = data[0].address_Id;

                                var name = data[0].Owner_name;


                                $("#email1").val(email);
                                $("#email").val(email);

                                $.ajax({
                                    url: 'https://ganeshgondyalaserver.azurewebsites.net/api/Address',
                                    method: 'GET',

                                    success: function (pw1) {
                                        data2 = [];
                                        for (var j = 0; j < pw1.length; j++) {
                                            if (pw1[j].AddressId == addresid) {
                                                data2.push(pw1[j]);
                                            }

                                        }
                                        var city = data2[0].City;
                                        var hno = data2[0].Hno;

                                        var ad1 = data2[0].Address_line1;
                                        var state = data2[0].state;
                                        var country = data2[0].Country;
                                        var pincode = data2[0].pincode;



                                        $("#owname").val(name);
                                        $("#hno").val(hno);
                                        $("#adl").val(ad1)
                                        $("#city").val(city);
                                        $("#state").val(state);
                                        $("#country").val(country);
                                        $("#pincode").val(pincode);
                                        var ftable = document.getElementById("firstTable")
                                        ftable.style.display = 'none';


                                    },

                                    error: function () {
                                        alert("Error fetching data from API2");
                                    }
                                });
                            }
                            else {

                                var r = $(".dis")

                                r.show();
                                document.getElementById("status").innerText = "No owner exist with email  " + email + " Click on proceed";





                                var alertElement = document.getElementById("myAlert1");
                                alertElement.style.display = 'block';

                                // Set a timer to hide the alert after 3 seconds
                                setTimeout(function () {
                                    alertElement.style.display = 'none';
                                }, 3000);

                            }
                        },
                        error: function () {
                            alert("Error fetching data from API1");
                        }
                    });
                }
            });
        });
    </script>
    <div class="red" id="red" style="display:none;">

        <strong>OOPS!</strong>
        <div id="red1"></div>
    </div>





